{
  "mcpServers": {
    "supabase": {
      "command": "npx",
      "args": ["-y", "@supabase/mcp-server-supabase"],
      "env": {
        "SUPABASE_URL": "$SUPABASE_URL",
        "SUPABASE_SERVICE_ROLE_KEY": "$SUPABASE_SERVICE_KEY",
        "SUPABASE_ANON_KEY": "$SUPABASE_ANON_KEY",
        "DEFAULT_SCHEMA": "public",
        "ENABLE_RLS": "true",
        "QUERY_TIMEOUT": "30000",
        "MAX_ROWS": "1000",
        "CONNECTION_POOL_SIZE": "10",
        "STATEMENT_TIMEOUT": "60000",
        "ALLOWED_OPERATIONS": "SELECT,INSERT,UPDATE,DELETE",
        "RESTRICTED_TABLES": "auth.users,auth.refresh_tokens,auth.sessions",
        "RESTRICTED_SCHEMAS": "_realtime,storage,graphql,graphql_public",
        "ENABLE_QUERY_LOGGING": "true",
        "LOG_LEVEL": "info"
      }
    }
  },
  "databaseProfiles": {
    "development": {
      "SUPABASE_URL": "$SUPABASE_DEV_URL",
      "SUPABASE_SERVICE_ROLE_KEY": "$SUPABASE_DEV_KEY",
      "ENABLE_RLS": "false",
      "LOG_LEVEL": "debug",
      "ALLOWED_OPERATIONS": "ALL"
    },
    "production": {
      "SUPABASE_URL": "$SUPABASE_PROD_URL",
      "SUPABASE_SERVICE_ROLE_KEY": "$SUPABASE_PROD_KEY",
      "ENABLE_RLS": "true",
      "LOG_LEVEL": "error",
      "ALLOWED_OPERATIONS": "SELECT",
      "MAX_ROWS": "100"
    },
    "readonly": {
      "ALLOWED_OPERATIONS": "SELECT",
      "RESTRICTED_TABLES": "*",
      "MAX_ROWS": "100"
    }
  },
  "queryTemplates": {
    "userProfile": {
      "sql": "SELECT * FROM profiles WHERE user_id = $1",
      "description": "Get user profile by ID"
    },
    "recentPosts": {
      "sql": "SELECT p.*, u.username, u.avatar_url FROM posts p JOIN profiles u ON p.author_id = u.user_id WHERE p.status = 'published' ORDER BY p.created_at DESC LIMIT $1",
      "description": "Get recent published posts with author info"
    },
    "userStats": {
      "sql": "SELECT COUNT(DISTINCT p.id) as post_count, COUNT(DISTINCT c.id) as comment_count, COUNT(DISTINCT f.follower_id) as follower_count FROM profiles u LEFT JOIN posts p ON u.user_id = p.author_id LEFT JOIN comments c ON u.user_id = c.user_id LEFT JOIN follows f ON u.user_id = f.following_id WHERE u.user_id = $1 GROUP BY u.user_id",
      "description": "Get user statistics"
    }
  },
  "migrationSettings": {
    "migrationTable": "schema_migrations",
    "migrationDirectory": "./supabase/migrations",
    "seedDirectory": "./supabase/seeds",
    "rollbackEnabled": true
  },
  "securityPolicies": {
    "defaultRLS": {
      "SELECT": "auth.uid() = user_id OR is_public = true",
      "INSERT": "auth.uid() = user_id",
      "UPDATE": "auth.uid() = user_id",
      "DELETE": "auth.uid() = user_id AND deleted_at IS NULL"
    },
    "adminOverride": {
      "roles": ["service_role", "admin"],
      "bypassRLS": true
    }
  },
  "performanceSettings": {
    "indexSuggestions": true,
    "queryAnalysis": true,
    "cacheStrategy": "aggressive",
    "connectionPooling": {
      "min": 2,
      "max": 10,
      "idleTimeoutMillis": 30000,
      "connectionTimeoutMillis": 2000
    }
  }
}